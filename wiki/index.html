<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Velmor Wiki</title>
  <link rel="icon" href="../content/velmor.png" type="image/png">
  <link rel="shortcut icon" href="../content/velmor.png" type="image/png">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
  <!-- Fontlar -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=EB+Garamond&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style type="text/tailwindcss">
    body { font-family: 'Cinzel', serif; background-image: url('bg.jpg'); background-size: cover; background-position: center; background-attachment: fixed; }
    :root { --gold-color: #D4AF37; }
    p { font-family: 'EB Garamond', serif; }
    /* Slightly smaller navbar links */
    header nav a { font-size: 0.9rem; }
    @media (min-width: 768px) {
      header nav a { font-size: 0.95rem; }
    }
    /* Modal animations */
    .modal-enter {
      opacity: 0;
      transform: translateY(-10px) scale(0.98);
    }
    .modal-enter-active {
      transition: all 220ms ease-out;
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    .modal-leave {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    .modal-leave-active {
      transition: all 180ms ease-in;
      opacity: 0;
      transform: translateY(-8px) scale(0.99);
    }
  </style>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            gold: 'var(--gold-color)',
            'background-dark': '#111827',
            'card-dark': 'rgba(0, 0, 0, 0.55)',
            'border-dark': 'rgba(255, 255, 255, 0.1)',
            'text-dark': '#D1D5DB',
          },
          spacing: {
            '28': '7rem',
          },
          fontFamily: { display: ['Cinzel', 'serif'] },
        },
      },
    }
  </script>
</head>

<body class="bg-background-dark text-text-dark min-h-screen">
  <!-- Background overlay (fixed so it covers full page) -->
  <div id="pageBackgroundOverlay" style="position:fixed; inset:0; z-index:0; background: rgba(0,0,0,0.6); pointer-events:none; backdrop-filter: blur(4px);"></div>

  <!-- İçerik -->
  <div class="relative z-10 px-4 md:px-8 lg:px-12 xl:px-28 py-8">
    <!-- Navbar -->
    <header class="flex justify-between items-center mb-12">
      <a href="index.html" class="text-2xl md:text-3xl font-bold text-white hover:text-gold transition-colors">VELMOR WIKI</a>
      <nav class="flex items-center space-x-6 text-white text-base md:text-lg">
        <a href="../index.html" class="hover:text-gold transition-colors">Anasayfa</a>
        <a href="../kutsal-savas.html" class="hover:text-gold transition-colors">Kutsal Savaş</a>
        <a href="../events.html" class="hover:text-gold transition-colors">Olaylar</a>
        <div class="relative flex items-center">
          <!-- search button opens modal (icon) -->
          <button id="openSearch" class="ml-2 hover:text-gold transition-colors" style="padding-top: 5px; margin-right: 20px;">
            <span class="material-symbols-outlined">search</span>
          </button>
          <button id="openLogin" class="ml-2 hover:text-gold transition-colors bg-transparent border-0 p-0">
            <span class="material-symbols-outlined text-2xl">manage_accounts</span>
          </button>
        </div>
      </nav>
    </header>

    <!-- Ana Grid -->
    <main class="mx-auto">
      <div class="bg-black/60 border border-border-dark p-6 lg:p-8 rounded-sm grid grid-cols-1 lg:grid-cols-3 gap-3">
      <!-- Sol -->
      <div class="space-y-3">
        <div class="bg-card-dark border border-border-dark p-6">
          <h2 class="text-2xl font-bold text-white border-b border-border-dark pb-2 mb-4">Welcome to Velmor Wiki</h2>
          <p>Bu wiki, Velmor kıtasının gizemli diyarlarını, muhteşem devletlerini, yiğit karakterlerini ve asırlardır anlatılan destansı hikayelerini keşfetmek için büyüleyici bir rehberdir; her sayfası, bu eşsiz dünyanın sırlarını açığa çıkaran bir kapıdır.</p>
          <!-- <p class="mt-4">Feel free to contribute by creating new articles or expanding on existing ones.</p> -->
          <div class="mt-6 text-center">
            <span class="text-sm text-gray-400">MADE BY</span>
            <div class="text-3xl font-extrabold text-white tracking-widest mt-1">LESSTRO</div>
          </div>
        </div>

        <div class="bg-card-dark border border-border-dark p-6">
          <h2 class="text-2xl font-bold text-white border-b border-border-dark pb-2 mb-4">About the Continent of Velmor</h2>
          <p>Velmor kıtasının tarihindeki en karanlık sayfalarından biri olan Kutsal Savaş, Aurelion İmparatoru Aurelius Soran’ın Tanrı Solvyr’a olan sarsılmaz inancı ve büyüye karşı yürüttüğü radikal arındırma seferberliğiyle kıvılcımlanmıştır. Soran’ın kıtadaki tüm krallıklara ve şehir devletlerine verdiği ültimatom, büyücülerini teslim etmeleri emri Velmor’u derin bir uçurumun kenarına sürüklemiştir. <br><br> Kutsal Savaş’ın yankıları hâlâ Velmor’un her köşesinde hissedilmektedir. Velmor’un kaderi, cesur ruhların ellerinde yeniden yazılacaktır. Bu wiki, bu destansı mücadelenin sırlarını ve olası yarınlarını keşfetmek için kapınızı aralıyor.</p>
        </div>
      </div>

      <!-- Orta -->
      <div class="space-y-3">
        <!-- Quick Nav -->
        <div class="bg-card-dark border border-border-dark p-6">
          <h2 class="text-2xl font-bold text-white border-b border-border-dark pb-2 mb-3">Quick Navigation</h2>
          <div class="grid grid-cols-2 md:grid-cols-3 gap-2 text-center">
            <a href="/wiki/page.html?slug=devletler" class="flex flex-col items-center p-2 hover:bg-white/10 transition">
              <span class="material-icons text-3xl text-white">flag</span>
              <span class="mt-1 text-sm text-white">Devletler</span>
            </a>
            <a href="/wiki/page.html?slug=topluluklar" class="flex flex-col items-center p-2 hover:bg-white/10 transition">
              <span class="material-icons text-3xl text-white">groups</span>
              <span class="mt-1 text-sm text-white">Topluluklar</span>
            </a>
            <a href="/wiki/page.html?slug=muharebe" class="flex flex-col items-center p-2 hover:bg-white/10 transition">
              <span class="material-symbols-outlined text-3xl text-white">swords</span>
              <span class="mt-1 text-sm text-white">Muharebe</span>
            </a>
            <a href="/wiki/page.html?slug=kurallar" class="flex flex-col items-center p-2 hover:bg-white/10 transition">
              <span class="material-icons text-3xl text-white">gavel</span>
              <span class="mt-1 text-sm text-white">Kurallar</span>
            </a>
            <a href="/wiki/page.html?slug=sehirler" class="flex flex-col items-center p-2 hover:bg-white/10 transition">
              <span class="material-icons text-3xl text-white">castle</span>
              <span class="mt-1 text-sm text-white">Şehirler</span>
            </a>
            <a href="/wiki/page.html?slug=cografya" class="flex flex-col items-center p-2 hover:bg-white/10 transition">
              <span class="material-icons text-3xl text-white">landscape</span>
              <span class="mt-1 text-sm text-white">Coğrafya</span>
            </a>
          </div>
        </div>

        <!-- All Pages (dynamically loaded from DB; top-level pages only) -->
        <div class="bg-card-dark border border-border-dark p-6">
          <h2 class="text-2xl font-bold text-white border-b border-border-dark pb-2 mb-4">All Pages</h2>
          <div id="allPagesList" class="flex flex-wrap gap-2">
            <p class="text-gray-400 text-sm">Loading...</p>
          </div>
        </div>
      </div>

      <!-- Sağ: Dinamik sayfalar -->
      <div id="recentPages" class="space-y-3">
        <div class="bg-card-dark border border-border-dark p-6">
          <h2 class="text-2xl font-bold text-white border-b border-border-dark pb-2 mb-4">Recently Visited Pages</h2>
          <div id="recentVisitedList" class="space-y-2">
            <!-- Dinamik içerik -->
          </div>
        </div>
        <div class="bg-card-dark border border-border-dark p-6">
          <h2 class="text-2xl font-bold text-white border-b border-border-dark pb-2 mb-4">Recently Added Pages</h2>
          <div id="recentPagesList" class="space-y-2">
            <!-- Dinamik içerik -->
          </div>
        </div>
      </div>
    </main>
  </div>

  <script type="module" src="supabase.js"></script>
  <!-- Search modal and backdrop (hidden by default) -->
  <div id="searchBackdrop" class="fixed inset-0 z-40 bg-black/40 backdrop-blur-sm" style="display:none;"></div>
  <div id="searchModal" class="fixed inset-0 z-50 flex items-center justify-center p-8" style="display:none;">
  <div class="relative border border-border-dark p-6 w-full max-w-2xl shadow-lg" style="background-color: rgba(8,8,8,0.95); transform: translateY(-5vh);">
      <button id="closeSearch" class="absolute right-3 top-3 text-white bg-transparent border-0 p-1 hover:text-gold">
        <span class="material-symbols-outlined">close</span>
      </button>
      <div class="mb-3">
        <h3 class="text-lg font-semibold text-white">Sayfalar içinde ara</h3>
      </div>
      <div class="mb-4">
        <input id="modalSearchInput" placeholder="Aramak için yaz (en az 3 karakter)..." type="text" autocomplete="off" class="w-full bg-black/30 border border-border-dark text-white rounded py-2 px-3 focus:outline-none focus:ring-2 focus:ring-gold focus:border-gold" />
      </div>
      <div id="searchResults" class="space-y-2 max-h-72 overflow-auto text-white"></div>
    </div>
  </div>
  <!-- Login modal (hidden by default) -->
  <div id="loginBackdrop" class="fixed inset-0 z-40 bg-black/40 backdrop-blur-sm" style="display:none;"></div>
  <div id="loginModal" class="fixed inset-0 z-50 flex items-center justify-center p-8" style="display:none;">
    <div class="relative bg-card-dark border border-border-dark p-6 w-full max-w-sm shadow-lg" style="background-color: rgba(8,8,8,0.95);">
      <button id="closeLogin" class="absolute right-3 top-3 text-white bg-transparent border-0 p-1 hover:text-gold">
        <span class="material-symbols-outlined">close</span>
      </button>
      <h3 class="text-lg font-semibold text-white mb-4">Giriş Yap</h3>
      <input id="loginEmail" type="email" placeholder="E-posta" class="w-full mb-3 p-2 bg-black/30 border border-border-dark text-white focus:outline-none focus:ring-2 focus:ring-gold focus:border-gold" />
      <input id="loginPassword" type="password" placeholder="Şifre" class="w-full mb-3 p-2 bg-black/30 border border-border-dark text-white focus:outline-none focus:ring-2 focus:ring-gold focus:border-gold" />
      <div class="flex items-center justify-between mb-3">
        <label class="text-sm text-gray-300"><input id="loginRemember" type="checkbox" class="mr-2"> Beni hatırla</label>
        <button id="loginBtn" class="bg-gold text-black px-4 py-1 rounded">Giriş</button>
      </div>
      <div id="loginError" class="text-red-400 text-sm"></div>
    </div>
  </div>
  <script type="module" src="index.js"></script>
</body>
</html>
